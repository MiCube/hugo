<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><title>电子邮箱的那些事 | 有涯</title><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name="description" content="我刚接触互联网的时候正是博客流行的时候，当时看到很多人是独立域名博客，后来发现还有独立域名邮箱，当时是非常羡慕，我自己也弄了一些域名和邮箱。折腾来折腾去，一直没有将常用邮箱设置成独立域名邮箱。"><link rel="canonical" href="https://blog.youya.org/2022/02/12/email-protocols-and-how-to-i-use-email/"><link rel="alternate" href="/atom.xml" title="有涯" type="application/atom+xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 7.3.0"></head><body class="body"><div class="container container--outer"><header class="header"><div class="container"><div class="logo"><a class="logo__link" href="/" title="有涯" rel="home"><div class="logo__title">有涯</div><div class="logo__tagline">行到水穷处，坐看云起时</div></a></div><nav class="menu"><button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0"><span class="menu__btn-title" tabindex="-1">Menu</span></button><ul class="menu__list"><li class="menu__item"><a class="menu__link" href="/"><span class="menu__text">Home</span></a></li><li class="menu__item"><a class="menu__link" href="/about/"><span class="menu__text">About</span></a></li><li class="menu__item"><a class="menu__link" href="/archives/"><span class="menu__text">Archives</span></a></li><li class="menu__item"><a class="menu__link" href="/brokers/"><span class="menu__text">Brokers</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class="primary"><main class="main" role="main"><article class="post"><header class="post__header"><h1 class="post__title">电子邮箱的那些事</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg> <time class="meta__text" datetime="2022-02-12">2022-02-12</time></div></div></header><div class="content post__content clearfix"><p>我刚接触互联网的时候正是博客流行的时候，当时看到很多人是独立域名博客，后来发现还有独立域名邮箱，当时是非常羡慕，我自己也弄了一些域名和邮箱。折腾来折腾去，一直没有将常用邮箱设置成独立域名邮箱。</p><span id="more"></span><p>我已经记不得我最开始用的哪家域名邮箱了，反正当时用过 Google、微软、QQ、网易、Zoho提供的域名邮箱或企业邮箱服务，应该还有其他的，暂时想不起来了。目前还在使用的就是Google和QQ的域名&#x2F;企业邮箱了。</p><p>Google Apps（现在叫Google Workspace）一直不支持CN域名，但是最开始的那段时间可以将域名后缀里的<code>cn</code>换成大写字母来规避，我当时注册了两个，还用了一段时间，最后Google直接发邮件强行将CN域名的Google Apps给停止了。期间其实我差一点就将Google Apps邮箱当作自己的主邮箱，主要原因就是Google Apps账户功能比普通的Google账户功能少把我劝退了。</p><p>前段时间Google发邮件说以前注册的Google Apps账户要停止服务了，我手里目前还有两个Google Apps账户，一直没使用，就在那里放着。本来这件事对我没任何影响，但是加上近雅虎要强行终止我的<code>@yahoo.com</code>的邮箱了，这让我发现平台也不靠谱，说不一定哪天就没了。博客虽然不怎么更新，但我一直保持在自己的域名下面，无论服务器用谁家的，但是入口总在我手里。</p><p>邮箱的入口也应该掌握在自己手里，这样就不怕平台倒闭或自己被强行终止服务了，还有就是也不怕邮件发不出去了。曾经我第一份实习工作时要统计服务器上的i386和x86_64的软件分别有哪些，用QQ邮箱死活发不出去，想必各位都心领神会知道是哪个关键字导致的吧。</p><p>基于以上情况，我计划将自己的独立域名邮箱设置成常用邮箱，Google Apps肯定是用不成了，最近 Cloudflare 的 email routing 看着不错的样子的，之前想着收邮件用 email routing，发邮件用 Gmail sender alias，然后发现现在添加 sender alias 也需要 smtp 服务器了。</p><p>然后查查资料发现可以用 Gmail 的 smtp 服务器，但是发现总会识别成垃圾邮件。又查查资料，能做的全做了，但是 DKIM 始终做不成，这个权重应该还比较高，不做的话容易被识别成垃圾邮件。</p><p>其实在域名上能避免被识别成垃圾邮件的做法无非就是 SPF，DMARC 和 DKIM，前两者还比较好办，添加两条DNS记录就行了，而DKIM需要smtp服务端配合，而我只用Gmail，这个算是无解除非自建smtp服务器。</p><p>好吧，自建就建吧，反正自己有VPS，搭建也是一次性的投入。今天我使用 Postfix + OpenDKIM 把smtp服务搭建好了，SFP&#x2F;DMARC&#x2F;DKIM 全部通过，这下应该没问题了吧，结果试了几个邮件服务，发现Outlook和Zoho会识别成垃圾邮件，已经发邮件给Outlook和Zoho反馈了，不知道会不会得到回复。慢慢的再测试更多邮件服务。</p><p>至此，收邮件用 cloudflare email routing，发邮件用自建smtp服务和Gmail和smtp服务，虽然会被一些邮件服务识别成垃圾邮件，但也算基本满足需求了。</p><p>关于smtp server，我做成了一个容器镜像，申请个TLS证书，运行几条命令，在DNS权威服务器里设置SFP、DMARC和DKIM记录，然后就能愉快的使用了。</p><p>项目地址和使用方法：<a href="https://github.com/chenzhiwei/dockerfile/tree/master/services/postfix" target="_blank" rel="noopener external nofollow noreferrer">https://github.com/chenzhiwei/dockerfile/tree/master/services/postfix</a></p></div><footer class="post__footer"><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg><ul class="tags__list"><li class="tags__item"><a class="tags__link btn" href="/tags/tech/" rel="tag">Tech</a></li><li class="tags__item"><a class="tags__link btn" href="/tags/email/" rel="tag">Email</a></li><li class="tags__item"><a class="tags__link btn" href="/tags/cloudflare/" rel="tag">CloudFlare</a></li><li class="tags__item"><a class="tags__link btn" href="/tags/google/" rel="tag">Google</a></li><li class="tags__item"><a class="tags__link btn" href="/tags/postfix/" rel="tag">Postfix</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class="pager__link" href="/2022/07/22/install-and-use-archlinux/" rel="prev"><span class="pager__subtitle">«&thinsp;Previous</span><p class="pager__title">安装和使用Archlinux</p></a></div><div class="pager__item pager__item--next"><a class="pager__link" href="/2021/09/21/some-thoughts/" rel="next"><span class="pager__subtitle">Next&thinsp;»</span><p class="pager__title">突然有感发发的碎碎念</p></a></div></nav><section class="comments"><div id="tcomment"></div><script src="https://registry.npmmirror.com/twikoo/1.6.39/files/dist/twikoo.min.js"></script><script>twikoo.init({envId:"https://blog-comments.youya.org",el:"#tcomment",path:"/2022/02/12/email-protocols-and-how-to-i-use-email/",lang:"zh-CN"})</script></section></div><aside class="sidebar"><div class="widget-search widget"><form class="widget-search__form" role="search" method="get" action="https://google.com/search" target="_blank"><input class="widget-search__field" type="search" placeholder="Search..." name="q" aria-label="Search..."> <input class="widget-search__submit" type="submit" value="Search"> <input type="hidden" name="sitesearch" value="https://blog.youya.org"></form></div><div class="widget-ads widget"><h4 class="widget__title">Google Ads</h4><div class="widget__content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5700774973519770" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5700774973519770" data-ad-slot="1935557915" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><div class="widget-related widget"><h4 class="widget__title">Related Posts</h4><div class="widget__content"><ul class="widget__list"><li class="widget__item"><a class="widget__link" href="/2024/07/06/layer-2-network/">闲话大二层网络</a></li><li class="widget__item"><a class="widget__link" href="/2024/06/09/linux-routing-and-routing-policy/">Linux中的路由表与路由策略管理</a></li><li class="widget__item"><a class="widget__link" href="/2024/04/27/podman-manages-vms/">Podman管理虚拟机</a></li><li class="widget__item"><a class="widget__link" href="/2023/04/21/python-quick-start/">Python开发快速上手</a></li><li class="widget__item"><a class="widget__link" href="/2022/10/23/kubernetes-csi-storage-e2e-multi-tenant/">Kubernetes CSI 存储端到端多租户隔离</a></li></ul></div></div><div class="widget-recent widget"><h4 class="widget__title">Recent Posts</h4><div class="widget__content"><ul class="widget__list"><li class="widget__item"><a class="widget__link" href="/2024/07/14/poor-china-economy/">繁华渐逝：腹背受敌的中国经济</a></li><li class="widget__item"><a class="widget__link" href="/2024/07/06/layer-2-network/">闲话大二层网络</a></li><li class="widget__item"><a class="widget__link" href="/2024/06/09/linux-routing-and-routing-policy/">Linux中的路由表与路由策略管理</a></li><li class="widget__item"><a class="widget__link" href="/2024/05/18/year-end-bonus-tax/">奇葩的年终奖税收政策导致年终奖黑洞</a></li><li class="widget__item"><a class="widget__link" href="/2024/04/27/podman-manages-vms/">Podman管理虚拟机</a></li></ul></div></div><div class="widget-taglist widget"><h4 class="widget__title">Tag Cloud</h4><div class="widget__content"><a href="/tags/android/" style="font-size:26px">Android</a> <a href="/tags/apps/" style="font-size:18px">Apps</a> <a href="/tags/archlinux/" style="font-size:14px">Archlinux</a> <a href="/tags/bank/" style="font-size:14px">Bank</a> <a href="/tags/bash/" style="font-size:14px">Bash</a> <a href="/tags/blog/" style="font-size:26px">Blog</a> <a href="/tags/bond/" style="font-size:14px">Bond</a> <a href="/tags/cloudflare/" style="font-size:14px">CloudFlare</a> <a href="/tags/comics/" style="font-size:14px">Comics</a> <a href="/tags/commissions/" style="font-size:14px">Commissions</a> <a href="/tags/container/" style="font-size:22px">Container</a> <a href="/tags/cube/" style="font-size:22px">Cube</a> <a href="/tags/deepin/" style="font-size:14px">Deepin</a> <a href="/tags/docker/" style="font-size:22px">Docker</a> <a href="/tags/etf/" style="font-size:14px">ETF</a> <a href="/tags/economy/" style="font-size:14px">Economy</a> <a href="/tags/email/" style="font-size:14px">Email</a> <a href="/tags/fx/" style="font-size:14px">FX</a> <a href="/tags/firstrade/" style="font-size:14px">Firstrade</a> <a href="/tags/fund/" style="font-size:18px">Fund</a> <a href="/tags/futu/" style="font-size:18px">Futu</a> <a href="/tags/futures/" style="font-size:14px">Futures</a> <a href="/tags/google/" style="font-size:14px">Google</a> <a href="/tags/greenify/" style="font-size:14px">Greenify</a> <a href="/tags/hexo/" style="font-size:14px">Hexo</a> <a href="/tags/ibkr/" style="font-size:18px">IBKR</a> <a href="/tags/icbc/" style="font-size:14px">ICBC</a> <a href="/tags/iaas/" style="font-size:14px">IaaS</a> <a href="/tags/kubernetes/" style="font-size:26px">Kubernetes</a> <a href="/tags/life/" style="font-size:14px">Life</a> <a href="/tags/linux/" style="font-size:26px">Linux</a> <a href="/tags/longbridge/" style="font-size:14px">Longbridge</a> <a href="/tags/magisk/" style="font-size:14px">Magisk</a> <a href="/tags/mariadb/" style="font-size:14px">MariaDB</a> <a href="/tags/mysql/" style="font-size:14px">MySQL</a> <a href="/tags/network/" style="font-size:14px">Network</a> <a href="/tags/nginx/" style="font-size:14px">Nginx</a> <a href="/tags/oneplus/" style="font-size:14px">OnePlus</a> <a href="/tags/openssl/" style="font-size:14px">OpenSSL</a> <a href="/tags/option/" style="font-size:18px">Option</a> <a href="/tags/php/" style="font-size:14px">PHP</a> <a href="/tags/podman/" style="font-size:18px">Podman</a> <a href="/tags/postfix/" style="font-size:14px">Postfix</a> <a href="/tags/proxy/" style="font-size:14px">Proxy</a> <a href="/tags/python/" style="font-size:14px">Python</a> <a href="/tags/repost/" style="font-size:30px">Repost</a> <a href="/tags/rubik/" style="font-size:14px">Rubik</a> <a href="/tags/shell/" style="font-size:18px">Shell</a> <a href="/tags/stock/" style="font-size:30px">Stock</a> <a href="/tags/systemd/" style="font-size:14px">Systemd</a></div></div></aside></div><footer class="footer"><div class="container footer__container flex"><div class="footer__copyright">&copy; 2025 YOUYA.ORG. <span class="footer__copyright-credits">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.</span></div></div></footer></div><script src="/js/menu.js"></script></body></html>